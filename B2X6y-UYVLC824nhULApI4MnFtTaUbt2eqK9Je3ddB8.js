function fuzzysearch(n,t){var r=t.length,u=n.length,i,f,e;if(u>r)return!1;if(u===r)return n===t;n:for(i=0,f=0;i<u;i++){for(e=n.charCodeAt(i);f<r;)if(t.charCodeAt(f++)===e)continue n;return!1}return!0}function isElementInViewport(n){const t=n.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}(function(){function h(){u.removeAttribute("data-mode");t.setAttribute("hidden","");n.setAttribute("hidden","");e.setAttribute("hidden","");i.removeAttribute("hidden");f.removeAttribute("hidden")}const r=document.querySelector(".topbar-header-content > button:nth-child(2)"),c=document.querySelector(".topbar-header-content > button:nth-child(3)"),u=document.querySelector(".topbar-header"),n=document.querySelector(".topbar-back-arrow"),i=document.querySelector(".topbar-header-endpoint"),f=document.querySelector(".topbar-header-content"),e=document.querySelector(".searchbox"),t=document.querySelector("c3-overlay"),o=document.querySelector(".menu-container"),s=document.querySelector(".menu-container c3-overlay");c.addEventListener("click",n=>{n.stopPropagation(),o.removeAttribute("hidden")});s&&s.addEventListener("click",n=>{n.stopPropagation(),o.setAttribute("hidden","")});t&&t.addEventListener("click",n=>{n.stopPropagation(),h()});r&&r.addEventListener("click",r=>{r.stopPropagation(),u.setAttribute("data-mode","searching"),i.setAttribute("hidden",""),f.setAttribute("hidden",""),t.removeAttribute("hidden"),n.removeAttribute("hidden"),e.removeAttribute("hidden")});n&&n.addEventListener("click",n=>{n.stopPropagation(),h()});i.addEventListener("click",n=>{n.stopPropagation(),window.location.href="/"});const l=document.querySelector(".topbar-title");l.addEventListener("click",n=>{n.stopPropagation(),window.location.href="/"})})(),function(){function i(){const t=document.querySelector(".searchbox-form"),i=document.querySelector(".searchbox-input");t.addEventListener("submit",async t=>{t.preventDefault();const r=i.value.trim();if(r){n||(n=await u());const f=n.filter(n=>fuzzysearch(r,n.chineseTitle)||fuzzysearch(r,n.title))}})}function r(n){const t=new IntersectionObserver(n=>{Array.prototype.forEach.call(n,function(n){n.isIntersecting&&(t.unobserve(n.target),n.target.src=n.target.dataset.src)})});n.forEach(n=>{t.observe(n)})}async function u(){const n=await fetch("/admin/seearch_data.json");if(n.ok)return await n.json();throw new Error(`${n.statusText}`);}const t=document.querySelectorAll("img.cover");let n;addEventListener("DOMContentLoaded",()=>{t.forEach(n=>{isElementInViewport(n)&&n.dataset.src&&(n.src=n.dataset.src)})},!1);i();r(t)}()